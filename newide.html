<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="description" content="An Online IDE for the Coq Theorem Prover" />

    <link rel="stylesheet" href="external/bootstrap.min.css" />

    <title>Use Coq in Your Browser: The Js Coq Theorem Prover Online IDE!</title>
  </head>

<body>
  <div id="ide-wrapper" class="toggled">
  <div id="code-wrapper">
  <div id="document">
  <div>
    <h3>Welcome to the JsCoq Interactive Online System!</h3>
    <p>
      Welcome to the JsCoq technology demo! This page requires Chrome
      >= 48 or Firefox >= 45.  You should be already be a bit familiar
      with Coq, as this site doesn't contain (yet) a tutorial.
    </p>
    <h4>Instructions:</h4>
    <p>
      <strong>Alt-Enter</strong> (Cmd should work in Macs too) goes to
      the current point; <strong>Alt-N/P</strong> or <strong>Alt-Down/Up</strong> will
      move through the proof; <strong>F8</strong> or the power icon toogles
      the goal panel.
    </p>
    <h4>Setting up the environment:</h4>
    <p>
      Doing proofs from scratch can be interesting, but we will first
      load some libraries and tweak some Coq defaults to make our life
      inside Coq a bit more comfortable. Our particular choice of
      framework is the Mathematical Components library by the
      <a href="http://ssr.msr-inria.inria.fr/">MSR/Inria</a> team led by
      Georges Gonthier.
    </p>
  </div>
  <div>
    <textarea id="addnC" >
From Coq Require Import Init.Prelude Unicode.Utf8.
From mathcomp.ssreflect
Require Import ssreflect ssrfun ssrbool eqtype ssrnat div prime.

Set Implicit Arguments.
Unset Strict Implicit.
Unset Printing Implicit Defensive. </textarea>
  </div>
  <div>
    <h4>Cool! </h4>
    <p>
      Once the basic enviroment has been setup, we can write, share,
      and run Coq programs and proofs.

      As an example, a proof of the infinitude of primes is showcased
      below, have fun!
    </p>
  </div> <!-- panel-heading -->
  <div>
    <textarea id="prime_above" >
(* A nice proof of the infinitude of primes, by Georges Gonthier *)
Lemma prime_above m : {p | m < p & prime p}.
Proof.
have /pdivP[p pr_p p_dv_m1]: 1 < m`! + 1 by rewrite addn1 ltnS fact_gt0.
exists p => //; rewrite ltnNge; apply: contraL p_dv_m1 => p_le_m.
by rewrite dvdn_addr ?dvdn_fact ?prime_gt0 // gtnNdvd ?prime_gt1.
Qed.
    </textarea>
  <p>
    The main proof relies in the `pdivP` lemma, that asserts that
    every number is divided by a prime (it actually picks the first
    prime divisor).
  </p>
  <p>
    Now, we need to prove that for any n, the first prime divisor p of
    !m + 1 is greater than m. By contraposition, we can prove that p
    being less or equal than m contradicts p being a divisor of !m +
    1, as such p divides !m, but a prime number cannot divide 1.
  </p>
  <p>
    Quite a few Coq packages are availabe in JsCoq, including part of the
    standard library and most of the mathematical components, feel
    free to experiment, and bear with the alpha status of this demo.
  </p>
  <p>
    JsCoq's homepage is at github <a href="https://github.com/ejgallego/jscoq">
    https://github.com/ejgallego/jscoq</a> Â¡Salut!
  </p>
  </div> <!-- /#panel body -->
  </div> <!-- /#document -->
  </div> <!-- /#code-wrapper -->
  </div> <!-- /#ide-wrapper -->

  <script src="js/jscoq-loader.js" type="text/javascript"></script>
  <script type="text/javascript">

    var jscoq_ids  = ['addnC', 'prime_above'];
    var jscoq_opts = {
        prelude:   false,
        mock:      false,
        base_path: './',
        init_pkgs: ['init']
    };

    /* Global reference */
    var coq;

    loadJsCoq(jscoq_opts.base_path)
        .then( () => coq = new CoqManager(jscoq_ids, jscoq_opts) );
  </script>
</body>
</html>
